<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <script>
    // 单例模式
    // 闭包中单例模式利用到了闭包
    // 通过自执行函数将instance一直保存在闭包的函数作用域内
    // 每当我们新建新的instance实例时，我们会在闭包的作用域内检验当前的instance是否已经创建，如果已经创建返回之前的instance
    const singleStorage = function() {};

    singleStorage.getInstance = (function(){
      var instance = null;
      return function(){
        if(!instance){
          instance = new singleStorage();
        }
        return instance;
      };
      
    })();

    let a = singleStorage.getInstance();
    let b = singleStorage.getInstance();
    console.log(a === b);
    
  </script>
</body>
</html>